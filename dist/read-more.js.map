{"version":3,"file":"read-more.js","sources":["../src/package/read-more.js"],"sourcesContent":["import './read-more.css';\n\n/**\n *  Read More JS\n *  Truncates text via specfied character length with more/less actions.\n *  Maintains original format of pre truncated text.\n *  @author stephen scaff\n *  @todo   Add destroy method for ajaxed content support.\n *\n */\n const ReadMore = (() => {\n   let s;\n\n   return {\n\n     settings() {\n       return {\n         content: document.querySelectorAll('.js-read-more'),\n         originalContentArr: [],\n         truncatedContentArr: [],\n         moreLink: \"Read More\",\n         lessLink: \"Less Link\",\n       }\n     },\n\n     init() {\n       s = this.settings();\n       this.bindEvents();\n     },\n\n     bindEvents() {\n       ReadMore.truncateText();\n     },\n\n     /**\n      * Count Words\n      * Helper to handle word count.\n      * @param {string} str - Target content string.\n      */\n     countWords(str) {\n       return str.split(/\\s+/).length;\n     },\n\n     /**\n      * Ellpise Content\n      * @param {string} str - content string.\n      * @param {number} wordsNum - Number of words to show before truncation.\n      */\n     ellipseContent(str, wordsNum) {\n       return str.split(/\\s+/).slice(0, wordsNum).join(' ') + '...';\n     },\n\n     /**\n      * Truncate Text\n      * Truncate and ellipses contented content\n      * based on specified word count.\n      * Calls createLink() and handleClick() methods.\n      */\n     truncateText() {\n\n       for (let i = 0; i < s.content.length; i++) {\n         //console.log(s.content)\n         const originalContent = s.content[i].innerHTML;\n         const numberOfWords = s.content[i].dataset.rmWords;\n         const truncateContent = ReadMore.ellipseContent(originalContent, numberOfWords);\n         const originalContentWords = ReadMore.countWords(originalContent);\n\n         s.originalContentArr.push(originalContent);\n         s.truncatedContentArr.push(truncateContent);\n\n         if (numberOfWords < originalContentWords) {\n           s.content[i].innerHTML = s.truncatedContentArr[i];\n           let self = i;\n           ReadMore.createLink(self)\n         }\n       }\n       ReadMore.handleClick(s.content);\n     },\n\n     /**\n      * Create Link\n      * Creates and Inserts Read More Link\n      * @param {number} index - index reference of looped item\n      */\n     createLink(index) {\n       const linkWrap = document.createElement('span');\n\n       linkWrap.className = 'read-more__link-wrap';\n\n       linkWrap.innerHTML = `<a id=\"read-more_${index}\"\n                                class=\"read-more__link\"\n                                style=\"cursor:pointer;\">\n                                ${s.moreLink}\n                            </a>`;\n\n       // Inset created link\n       s.content[index].parentNode.insertBefore(linkWrap, s.content[index].nextSibling);\n\n     },\n\n     /**\n      * Handle Click\n      * Toggle Click eve\n      */\n     handleClick(el) {\n       const readMoreLink = document.querySelectorAll('.read-more__link');\n\n       for (let j = 0, l = readMoreLink.length; j < l; j++) {\n\n         readMoreLink[j].addEventListener('click', function() {\n\n           const moreLinkID = this.getAttribute('id');\n           let index = moreLinkID.split('_')[1];\n\n           el[index].classList.toggle('is-expanded');\n\n           if (this.dataset.clicked !== 'true') {\n              el[index].innerHTML = s.originalContentArr[index];\n              this.innerHTML = s.lessLink;\n              this.dataset.clicked = true;\n           } else {\n             el[index].innerHTML = s.truncatedContentArr[index];\n             this.innerHTML = s.moreLink;\n             this.dataset.clicked = false;\n           }\n         });\n       }\n     },\n\n     /**\n      * Open All\n      * Method to expand all instances on the page.\n      * Will probably be useful with a destroy method.\n      */\n     openAll() {\n       const instances = document.querySelectorAll('.read-more__link');\n         for (let i = 0; i < instances.length; i++) {\n           content[i].innerHTML = s.truncatedContentArr[i];\n           instances[i].innerHTML = s.moreLink;\n         }\n       }\n     }\n })();\n\nexport default ReadMore;\n"],"names":["const","s","ReadMore","settings","content","document","querySelectorAll","originalContentArr","truncatedContentArr","moreLink","lessLink","init","this","bindEvents","truncateText","countWords","str","split","length","ellipseContent","wordsNum","slice","join","let","i","originalContent","innerHTML","numberOfWords","dataset","rmWords","truncateContent","originalContentWords","push","createLink","handleClick","index","linkWrap","createElement","className","parentNode","insertBefore","nextSibling","el","readMoreLink","j","l","addEventListener","getAttribute","classList","toggle","clicked","openAll","instances"],"mappings":"AAUCA,IACMC,EADAC,EAGG,CAELC,0BACS,CACLC,QAASC,SAASC,iBAAiB,iBACnCC,mBAAoB,GACpBC,oBAAqB,GACrBC,SAAU,YACVC,SAAU,cAIdC,gBACEV,EAAIW,KAAKT,gBACJU,cAGPA,sBACEX,EAASY,gBAQXC,oBAAWC,UACFA,EAAIC,MAAM,OAAOC,QAQ1BC,wBAAeH,EAAKI,UACXJ,EAAIC,MAAM,OAAOI,MAAM,EAAGD,GAAUE,KAAK,KAAO,OASzDR,4BAEOS,IAAIC,EAAI,EAAGA,EAAIvB,EAAEG,QAAQc,OAAQM,IAAK,KAEnCC,EAAkBxB,EAAEG,QAAQoB,GAAGE,UAC/BC,EAAgB1B,EAAEG,QAAQoB,GAAGI,QAAQC,QACrCC,EAAkB5B,EAASiB,eAAeM,EAAiBE,GAC3DI,EAAuB7B,EAASa,WAAWU,GAEjDxB,EAAEM,mBAAmByB,KAAKP,GAC1BxB,EAAEO,oBAAoBwB,KAAKF,GAEvBH,EAAgBI,IAClB9B,EAAEG,QAAQoB,GAAGE,UAAYzB,EAAEO,oBAAoBgB,GAE/CtB,EAAS+B,WADET,IAIftB,EAASgC,YAAYjC,EAAEG,UAQzB6B,oBAAWE,OACHC,EAAW/B,SAASgC,cAAc,QAExCD,EAASE,UAAY,uBAErBF,EAASV,UAAa,oBAAmBS,2JAGdlC,gDAI3BA,EAAEG,QAAQ+B,GAAOI,WAAWC,aAAaJ,EAAUnC,EAAEG,QAAQ+B,GAAOM,cAQtEP,qBAAYQ,WACJC,EAAetC,SAASC,iBAAiB,oBAEtCsC,EAAI,EAAGC,EAAIF,EAAazB,OAAQ0B,EAAIC,EAAGD,IAE9CD,EAAaC,GAAGE,iBAAiB,QAAS,eAGpCX,EADevB,KAAKmC,aAAa,MACd9B,MAAM,KAAK,GAElCyB,EAAGP,GAAOa,UAAUC,OAAO,eAEE,SAAzBrC,KAAKgB,QAAQsB,SACdR,EAAGP,GAAOT,UAAYzB,EAAEM,mBAAmB4B,QACtCT,UAAYzB,EAAES,cACdkB,QAAQsB,SAAU,IAExBR,EAAGP,GAAOT,UAAYzB,EAAEO,oBAAoB2B,QACvCT,UAAYzB,EAAEQ,cACdmB,QAAQsB,SAAU,MAW/BC,2BACQC,EAAY/C,SAASC,iBAAiB,oBACjCkB,EAAI,EAAGA,EAAI4B,EAAUlC,OAAQM,IACpCpB,QAAQoB,GAAGE,UAAYzB,EAAEO,oBAAoBgB,GAC7C4B,EAAU5B,GAAGE,UAAYzB,EAAEQ"}